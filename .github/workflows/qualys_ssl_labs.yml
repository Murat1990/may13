name: SSL Scan

on:
  workflow_dispatch:
  schedule: ## schedule the job to run at 12 am daily
     - cron: '0 0 * * *'
     
jobs:
  ssl-scan:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v2
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: 3.9
    - name: Install dependencies
      run: |
        python -m venv venv
        source venv/bin/activate
        pip install qualysapi qualysapi_ssl_labs
    - name: Scan website
      run: |
        source venv/bin/activate
        python -c "from qualysapi_ssl_labs import SSLLabsAPI; api = SSLLabsAPI(); api.scan('prepod.fiddler.ai')"
